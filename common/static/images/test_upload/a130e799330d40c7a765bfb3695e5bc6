Management Orecle
2017년 9월 22일 금요일
오전 9:14
 
export ORACLE_HOME=$/Users/kotech_cha/workspace/management/instantclient_11_2
cd instantclient_11_2
ln -s libclntsh.so.11.1   libclntsh.so
export ORACLE_HOME=$/Users/kotech_cha/workspace/management/instantclient_11_2
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME

sudo update_dyld_shared_cache
pip install cx_oracle

sudo ldconfig
 
 
====================================================

export ORACLE_HOME=/usr/lib/share/oracle
export VERSION=11.2.0.3.0
export ARCH=x86_64
cd $ORACLE_HOME
ln -s libclntsh.dylib.11.2 libclntsh.dylib
ln -s libocci.dylib.11.2 libocci.dylib
export DYLD_LIBRARY_PATH=$ORACLE_HOME
export LD_LIBRARY_PATH=$ORACLE_HOME
sudo pip install cx_Oracle



export VERSION=11.2.0.3.0
export ARCH=x86_64
cd $ORACLE_HOME



====================================================
 
ip: redukyo.iptime.org
port: 1521
sid: xe
id: cha
pw: cha
 
import cx_Oracle
conn = cx_Oracle.connect('cha/cha@redukyo.iptime.org:1521/xe')
 
===================================================
 
 
Kotech  에그
2017년 9월 18일 월요일
오후 1:19
 
Moda60792
 
 
 
 코테크 라스?
2017년 9월 12일 화요일
오전 11:49
 
http://122.199.151.8:5000/
 
 
ID : Kotech
PW : 코테크12#$
 
 
 
  
2017년 9월 12일 화요일
오전 11:43
아마존  AWS
 
aws console 검색 - https://aws.amazon.com/ko/console/ - console에 로그인 - EC2 - Instances - start/stop
(계정 : cyberwd@kotech.co.kr  //  비번 : Zhxpzm@4!3 )
 
chmod 400 /Users/kotechdev/Downloads/cyberwd-master-key.pem 
 
Launch Instance 옆에 Connect 클릭 후 나오는 example 긁어서 입력
 
끌때는 전부 정지시키고 stop해야됨
sudo /edx/bin/supervisorctl stop all
sudo service mysql stop
sudo service mongod stop
 
 
 
 
 
2017년 9월 12일 화요일
오전 11:43
 
Fullstack 정리
http://192.168.33.11/   (lms)
http://192.168.33.11:18010/    (studio)
 
에셋컴파일 하는법
https://openedx.atlassian.net/wiki/spaces/OpenOPS/pages/60227913/Managing+OpenEdX+Tips+and+Tricks
à/edx/var/edxapp/staticfiles 쪽에 파일이 다 옮겨짐?
 
 
Asci 에러
Edxapp 에서 cd ~/venvs/edxapp/lib/python2.7
vi site.py
asci ->utf-8
 
로그확인
/edx/var/log/supervisor
    1  sudo locale-gen en_US
    2  df -h
    3  sudo /edx/app/edx_ansible/pre-box 
    4  exit
    5  ll
    6  sudo -H -u edxapp bash
    7  ll
    8  ifconfig
    9  sudo /edx/bin/supervisorctl status
   10  ifconfig
   11  sudo -H -u edxapp bash
   12  sudo /edx/bin/supervisorctl status
   13  sudo /edx/bin/supervisorctl stop all
   14  sudo /edx/bin/supervisorctl status
   15  sudo -H -u edxapp bash
   16  history
   17  sudo /edx/bin/supervisorctl start all
   18  sudo /edx/bin/supervisorctl status
   19  cd /edx/var/log/
   20  ll
   21  cd supervisor/
   22  l
   23  ll | grep lms
   24  sudo tail -f lms*.log
 
edxapp실행후 dev 소스 적용
    2  cd venvs/
    3  cd edxapp/lib/python2.7/
    4  ll
    5  pwd
    6  vi site.py 
    7  ifconfig
    8  cd
    9  cd edx-platform/
   10  git statu
   11  git remote -v
   12  git remote set-url origin https://github.com/kmoocdev2/edx-platform.git 
   13  git remote -v
   14  git fetch --all
   15  git status
   16  git branch -r
   17  git branch -r | grep cha
   18  git pull
   19  git checkout cha33
   20  git pull
   21  sudo /edx/bin/supervisorctl status
   22  source /edx/app/edxapp/edxapp_env
   23  cd /edx/app/edxapp/edx-platform
   24  paver update_assets lms --settings=aws
25  sudo /edx/bin/supervisorctl start all
 
 
 
 
2017년 9월 12일 화요일
오전 11:42
 
Ficus 까는법
Installing Open edX Devstack에서Install Devstack
1번 건너뛰고 2번부터 순서대로 진행 (Users/kotechdev) 에서 진행
 
ex) 
mkdir workspace
cd workspace
mkdir devstack
cd devstack
. . .
export OPENEDX_RELEASE="open-release/ficus.3" (이부분만 수정)
 
그후 계속 진행하여 실행까지 
 
 
 
2017년 9월 12일 화요일
오전 11:42
 
Ficus box install
 
vagrant box add gbarbieru/xenial https://atlas.hashicorp.com/gbarbieru/boxes/xenial
vagrant init gbarbieru/xenial
vagrant up
(native 설치 박스 add)
 
 
 
 
 
 
  
2017년 9월 12일 화요일
오전 11:42
 
Devstack phycharm 연동시키기
 
http://edx.readthedocs.io/projects/edx-developer-guide/en/latest/environment/pycharm_ecommerce.html
 
https://openedx.atlassian.net/wiki/display/OpenDev/Working+with+devstack+and+PyCharm
 
 
 
 
2017년 9월 12일 화요일
오전 11:42
 
Devstack 정리
 
KO-KR 적용
 -lms.env.json에 LANGUAGE~~ en에서 ko-kr (한글설정)
Django.po 파일 한글화 적용
 -edx-platform디렉토리 안에 Conf디렉토리 위에서 i18n_tool generate
Mysql 접속
 - sudo su edxapp 에서 mysql -u root 입력
 
 
 
 
 
2017년 9월 12일 화요일
오전 11:42
 
'ascii' codec can't decode byte 0xe2 in position 0: ordinal not in range(128)
오류 해결방법
 
edxapp 에서 ~/venvs/edxapp/lib/python2.7 경로에서 vi site.py

 

encoding = “ascii” 부분 “utf-8”로 수정

 

 

 

 

 
2017년 9월 12일 화요일
오전 11:37
 
111Error (몽고DB 락) –edxapp 나와서 실행
sudo rm /edx/var/mongo/mongodb/mongod.lock
sudo -u mongodb mongod --dbpath /edx/var/mongo/mongodb --repair --repairpath /edxvar/mongo/mongodb
sudo start mongodb
 
sudo service mongod start
mongo
 
<관련주소>
https://stackoverflow.com/questions/30479795/edx-mongodb-connection-error-111
 
<평가파일 업로드 경로 수정>
edxapp cd 로 가서
(cp lms.env.json lms.env.json.back) 백업시켜주기
vi lms.env.json 로 URL 수정해줌
(/edx/var/edxapp/uploads 에 평가파일 업/다운로드 경로)
"GRADES_DOWNLOAD": {
        "BUCKET": "",
        "ROOT_PATH": "",   
        "STORAGE_CLASS": "django.core.files.storage.FileSystemStorage",
        "STORAGE_KWARGS": {
            "location": "/edx/var/edxapp/uploads"
        },
        "STORAGE_TYPE": ""
    },
--------------------------------------------------------------
Vagrant ssh 접속 후
1. sudo rm /edx/var/mongo/mongodb/mongod.lock
2. sudo -u mongodb mongod --dbpath /edx/var/mongo/mongodb --repair --repairpath /edx/var/mongo/mongodb
3. sudo service mongod start
 

python manage.py cms createsuperuser --settings aws
vagrant provision
 
 
 cnumooc  강좌추가
2017년 9월 13일 수요일
오후 6:05
 
http://studio.cnumooc.kr/
 
admin@example.com
?admin
 
 
 
Window devstack install
2017년 9월 13일 수요일
오후 1:10
 
1. 점검사항
- Windows 64bit OS
- 메모리 8GB 이상
- CMOS에서 intel VT-X 가 enabled 되어 있는 지 확인
- C: 드라이브의 빈공간이 10GB 이상 남아 있는 지 확인
2. Virtualbox 설치
기본 설치
https://www.virtualbox.org/wiki/Downloads
3. Vagrant 설치
기본설치
4. babun  설치
관리자 권한 실행
5. 플러그인 설치(최초 1회)
vagrant plugin install vagrant-vbguest
(이후 작업 babun 상에서 실행)
6. mkdir devstack
7. cd devstack
8. curl -LO https://raw.githubusercontent.com/edx/configuration/open-release/eucalyptus.3/vagrant/release/devstack/Vagrantfile
9. export OPENEDX_RELEASE="open-release/eucalyptus.3"
10. vagrant up
이후 진행중 오류 발생 되는 해당 내용에 대한 디버깅을 하며, 완료까지 vagrant provision 을 실행해야 함.
 
* Mysql 5.6 install (box 상에서)
sudo apt-get -y remove mysql-server
sudo apt-get -y autoremove
sudo apt-get -y install software-properties-common
sudo add-apt-repository -y ppa:ondrej/mysql-5.6
sudo apt-get update
sudo apt-get -y install mysql-server
* vagrant provision 실행시 오류가 발생하면
vagrant ssh로 box로 접속후
cd /edx/app/edx_ansible/edx_ansible/playbooks/roles/edx_ansible/tasks
sudo vi deploy.yml
아래의 2가지 task 하단에 
ignore_errors: yes 옵션 추가 (줄 맞춤 주의)
- name: Git checkout edx_ansible repo into edx_ansible_code_dir
- name: Install edx_ansible venv requirements
 
출처: <http://wp.kotech.co.kr/user/msg#view/201709110117140b31f> 

=========================================================================

회사 NAS의 정보가 변경되어 변경사항을 공유합니다.

접속 URL :  http://kotech.synology.me:5000
아이디 : kotech
비밀번호 : zhxpzm6015! (코테크6015!)

=========================================================================
K-Mooc 공유폴더 

=========================================================================
팝업 테이블 생성 쿼리 !


Create table popup (
popup_id int unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '팝업아이디',
popup_type varchar(10) Not Null COMMENT '팝업종류(H:html, I: image)',
link_type varchar(10) Not Null COMMENT 'link type ( 0: 없음 ,1:전체 ,2: 이미지맵)',
image_map varchar(30) COMMENT '이미지맵 좌표(예: 0,0,100,100 )',
title varchar(300) COMMENT '제목',
contents varchar(20000) COMMENT '내용',
image_file int COMMENT '이미지File',
link_url varchar(300) COMMENT 'Link URL',
link_target varchar(10) COMMENT 'link target(B: blank,S: self )',
start_date char(8) COMMENT '게시시작일 (yyyymmdd)',
start_time char(4) COMMENT '게시시작시간(hhmm)',
end_date char(8) COMMENT '게시종료일 (yyyymmdd)',
end_time char(4) COMMENT '게시종료시간(hhmm)',
template varchar(10) COMMENT '템플릿 번호 (0:없음,.. )',
width int COMMENT '창사이즈(width)',
height int COMMENT '창사이즈(height)',
hidden_day varchar(10) COMMENT '그만보기(0:그만보기,1:1일, 7:7일)',
regist_id int COMMENT '등록자id',
regist_date datetime default CURRENT_TIMESTAMP COMMENT '등록일시',
modify_id int COMMENT '수정자id',
modify_date datetime default CURRENT_TIMESTAMP COMMENT '수정일시',
use_yn char(1) default 'Y' COMMENT '사용함/안함',
delete_yn char(1) default 'N' COMMENT '삭제여부 (YN)'
);



Create table interest_course (
interest_id int unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '관심강좌아이디',
user_id int NOT NULL COMMENT '등록자아이디',
course_id varchar(255) NOT NULL COMMENT '강좌아이디', 
created datetime default CURRENT_TIMESTAMP COMMENT '등록일시',
modifid datetime default CURRENT_TIMESTAMP COMMENT '수정일시',
use_yn char(1) default 'Y' COMMENT '사용함/안함'
);



Create table multisite(
site_id int unsigned NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '멀티사이트아이디',
site_name varchar (300) NOT NULL COMMENT '멀티사이트 명',
site_code varchar (30) NOT NULL COMMENT '멀티사이트 코드',
logo_img varchar(300) COMMENT '로고 이미지',
site_url varchar(500) COMMENT '접근 url',
regist_id int COMMENT '등록자id',
regist_date datetime default CURRENT_TIMESTAMP COMMENT '등록일시',
modify_id int COMMENT '수정자id',
modify_date datetime default CURRENT_TIMESTAMP COMMENT '수정일시',
delete_yn char(1) default 'N' COMMENT '삭제여부 (YN)'
);



Create table multisite_user(
site_id int unsigned NOT NULL COMMENT '멀티사이트 아이디',
user_id int unsigned NOT NULL COMMENT 'edx user id',
regist_id int COMMENT '등록자id',
regist_date datetime default CURRENT_TIMESTAMP COMMENT '등록일시',
modify_id int COMMENT '수정자id',
modify_date datetime default CURRENT_TIMESTAMP COMMENT '수정일시',
delete_yn char(1) default 'N' COMMENT '삭제여부 (YN)',
PRIMARY KEY(site_id, user_id)
);

create table multisite_course (
 site_id int Not Null    comment '멀티사이트 아이디' , 
 course_id varchar(100) Not Null    comment 'course_id' , 
 regist_id int     comment '등록자id' , 
 regist_date datetime  default CURRENT_TIMESTAMP   comment '등록일시' , 
 primary key ( site_id, course_id ) )  comment='멀티사이트별 강좌' ; 




========================================================
https://github.com/kmoocdev2/edx-platform/blob/d74dd98d1027dd6f08604a42a4fc49e38cc0a2bd/lms/templates/courseware/course_review.html

https://github.com/kmoocdev2/edx-platform/blob/d74dd98d1027dd6f08604a42a4fc49e38cc0a2bd/lms/djangoapps/courseware/views/views.py

========================================================
https://172.17.101.235 
http://172.17.101.225/redmine

ftp://172.17.101.225
frt id : kmoocdev pw : kotech

git remote set-url origin https://172.17.101.235/kmoocdev2/edx-platform.git
https://github.com/


=========================================================
강좌관리

git merge origin dev




=========================================================
NO-rn 
개발유형-4.create_type
개발년도-4.create_year
회차-4.course_no
대학명-1.org로 맵핑후 한글화

대분류-몽고DB classfy?
중분류-몽고DB middle_classfy

강좌명-1.display_name
기관번호-1.org
강좌번호-1.course
강좌별운영번호-1.run
상태-static.py 참고해서 구분하면됨
개설일-1.created
수강신청시작일-1.enrollment_start
수강신청마감일-1.enrollment_end
종강일-1.end
이수증생성일-3.min(created)
교수자-4.teacher_name
동영상재생시간-1.effort[2]
주간학습권장시간-1.effort[0]
총주차-1.effort[1]
총학습시간-1.effort[0]*1.effort[1]
강좌수준-존재놉



course_overviews_courseoverview   1
student_courseaccessrole  2
certificates_generatedcertificate 3
course_overview_addinfo  4


create table course_overview_addinfo (
 course_id varchar(100) Not Null    comment '강좌코드' , 
 create_type varchar(20)     comment '개발유형(group_code:005)' , 
 create_year char(4)     comment '개발년도' , 
 course_no varchar(100)     comment '회차' , 
 teacher_name varchar(300)     comment '교수자명' , 
 delete_yn char(1)  default  'N'   comment '삭제여부' , 
 regist_id int     comment '등록자id' , 
 regist_date datetime  default CURRENT_TIMESTAMP   comment '등록일시' , 
 modify_id int     comment '수정자id' , 
 modify_date datetime  default CURRENT_TIMESTAMP   comment '수정일시' , 
 primary key ( course_id ) )  comment='강좌 추가 정보 관리' ; 
 
 
 
 create table code_group (
 group_code varchar(10) Not Null    comment '그룹코드' , 
 group_name varchar(100)     comment '그룹코드 명' , 
 group_desc varchar(1000)     comment '코드설명' , 
 use_yn char(1)  default  'Y'   comment '사용여부 (YN)' , 
 delete_yn char(1)  default  'N'   comment '삭제여부 (YN)' , 
 regist_id int     comment '등록자id' , 
 regist_date datetime  default CURRENT_TIMESTAMP   comment '등록일시' , 
 modify_id int     comment '수정자id' , 
 modify_date datetime  default CURRENT_TIMESTAMP   comment '수정일시' , 
 primary key ( group_code ) )  comment='그룹코드 관리' ; 

