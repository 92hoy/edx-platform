<head>
    <!-- Encoding setting -->
    <meta charset="UTF-8">
    <!-- BOOT STRAP -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <!-- JQUERY -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.js"
      integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
      crossorigin="anonymous"></script>
</head>

<!-- CSS -->
<style>
@import url(http://fonts.googleapis.com/earlyaccess/nanumgothic.css);

.star-ratings-css {
  unicode-bidi: bidi-override;
  color: #c5c5c5;
  font-size: 25px;
  height: 25px;
  width: 100px;
  margin: 0 auto;
  position: relative;
  text-shadow: 0 1px 0 #a2a2a2;
} 
.star-ratings-css::before { 
  content: '★★★★★';
  opacity: .3;
  position: absolute;
  font-size: 80%;
  color: #000000;
}

[title=".000"]::after {
  width: 0%;
}
[title=".200"]::after {
  width: 20%;
}
[title=".400"]::after {
  width: 38%;
}
[title=".600"]::after {
  width: 58%;
}
[title=".800"]::after {
  width: 76%;
}
[title=".1000"]::after {
  width: 100%;
}

.star-ratings-css::after {
  color: gold;
  content: '★★★★★';
  text-shadow: 0 1px 0 #ab5414;
  position: absolute;
  z-index: 1;
  display: block;
  left: 0;
  top: -2px;
  width: attr(rating);
  overflow: hidden;
  font-size: 80%;
}

.scrollbar
{
	height: 500px;
	overflow-y: scroll;
	margin-bottom: 15px;
        border: solid 1px #c9c9c9;
}
#style-1::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	border-radius: 10px;
	background-color: #F5F5F5;
}
#style-1::-webkit-scrollbar
{
	width: 12px;
	background-color: #F5F5F5;
}
#style-1::-webkit-scrollbar-thumb
{
	border-radius: 10px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	background-color: #555;
}

#review_point{ width: 150px; height: 25px;}

td{ padding: 15px; }

.review_own{ border: solid #c9c9c9 1px; background-color: #eee8fd; }

.review_nothing{ border: solid #cccccc 1px; margin-bottom: 18px; margin-top: 14px; padding: 15px; }

.review_body_div{ border: solid #f2f2f2 1px; }
.review_subject{ margin-bottom: 10px; }

.review_id{ width: 240px; color: #000000; font-weight: bold; font-size: 85%; font-family: 'Nanum Gothic'; }
.review_star{ width: 100px; }

.review_body_2 { width: 360px; margin-top: -10px; }
.review_content { padding-top: 0px; padding-bottom: 4px; font-size: 80%; font-family: 'Nanum Gothic'; }

.review_body_3{ color: red; font-family: 'Nanum Gothic'; margin-left: 300px; margin-top: -5px; margin-bottom: 8px; }

.review_time { width: 170px; float: left; color: #999999; font-size: 70%; }
.review_good { 
    border: solid #999999 1px; 
    height: 15px; 
    float: left; 
    padding-top: 2px; 
    padding-bottom: 18px; 
    margin-top: 13px;
    margin-right: 10px;
    font-size: 70%;
    color: #737373;
}
.review_bad { 
    border: solid #999999 1px; 
    height: 15px; 
    float: left; 
    padding-top: 2px; 
    padding-bottom: 18px; 
    margin-top: 13px; 
    font-size: 70%;
    color: #737373;
}

.review_good_img{ margin-right: 10px; }
.review_bad_img{ margin-right: 10px; }

.review_time_delete { width: 265px; float: left; color: #999999; font-size: 70%; }
.review_delete{ 
    border: solid #999999 1px; 
    height: 15px; 
    float: left; 
    padding-top: 2px; 
    padding-bottom: 18px; 
    margin-top: 13px;
    margin-right: 10px;
    font-size: 70%;
    color: #737373;
    width: 87px;
    text-align: center;
    background-color: #FFFFFF;
}
.review_button{ padding: 11px; color: #737373; }
a.review_button{ text-decoration: none; }
a.review_button:link{ color: #737373; }
a.review_button:visited{ color: #737373; }
a.review_button:hover{ color: #737373; }
a.review_button:active{ color: #737373; }

#review_write_star{ margin-bottom: -10px; }
#review_write_area{ height: 80px; font-size: 80%; }
#review_write_submit{ color: #FFFFFF; margin-top: 10px; float: right; }

div.backLayer {
    display: none;
    background-color: black;
    position: absolute;
    left: 0px;
    top: 0px;
}

@import url(//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css);

fieldset, label { margin: 0; padding: 0; }

.rating { 
  border: none;
  float: left;
}

.rating > input { display: none; } 
.rating > label:before { 
  margin: 5px;
  font-size: 1.25em;
  font-family: FontAwesome;
  display: inline-block;
  content: "\f005";
}

.rating > .half:before { 
  content: "\f089";
  position: absolute;
}

.rating > label { 
  color: #c9c9c9; 
 float: right; 
}

.rating > input:checked ~ label, 
.rating:not(:checked) > label:hover,
.rating:not(:checked) > label:hover ~ label { color: #FFD700;  } 

.rating > input:checked + label:hover,
.rating > input:checked ~ label:hover,
.rating > label:hover ~ input:checked ~ label,
.rating > input:checked ~ label:hover ~ label { color: #FFED85;  } 

</style>

<!-- script (write) -->
<script>
$(document).ready(function(){
    $("#review_write").click(function(){
        var width = $(window).width();
        var height = $(document).height();
             
        $(".backLayer").width(width);
        $(".backLayer").height(height);
        $(".backLayer").fadeTo(500, 0.3);

        var loadingDivObj = $("#loadingDiv");
        loadingDivObj.css("top", $(document).height()/2-150);
        loadingDivObj.css("left",$(document).width()/2-150);
        loadingDivObj.fadeIn(500);
    });
});

$(document).keydown(function(event){
    if(event.which=='27'){
    }
});

$(document).ready(function() {
    $(document).click(function(e) {  
    });
});

$(window).resize(function(){
    var width = $(window).width();
    var height = $(window).height();
    $(".backLayer").width(width).height(height);
});
</script>

<!-- HTML -->
<div class = "review_subject">Review</div>

<!-- HTMl (nothing) -->
% if len(review_list) == 0:
<div class ="review_nothing">
There is no written review.<br>
Write the first review!
</div>
% endif

<!-- HTML (own) -->
% if len(already_list) != 0:
    % for row in already_list:
    <div class = "review_own">
    <div class = "review_body_div">
	<table class = "review_body_table">
	    <tr class = "review_body_1">
		<td class ="review_id">${row[1]}</td>

                % if row[3] == 1:
		<td class ="review_star"><div class="star-ratings-css" title=".200"></div></td>
                % endif
                % if row[3] == 2:
		<td class ="review_star"><div class="star-ratings-css" title=".400"></div></td>
                % endif
                % if row[3] == 3:
		<td class ="review_star"><div class="star-ratings-css" title=".600"></div></td>
                % endif
                % if row[3] == 4:
		<td class ="review_star"><div class="star-ratings-css" title=".800"></div></td>
                % endif
                % if row[3] == 5:
		<td class ="review_star"><div class="star-ratings-css" title=".1000"></div></td>
                % endif

	    </tr>
	</table>
	<table>
	    <tr class = "review_body_2">
		<td class = "review_content">${row[2]}</td>
	    </tr>
	</table>
	<table>
	     <tr>
		<td class = "review_time_delete">${row[4]}</td>
                <form id="delete_form" action="" method="get">
                <input type="hidden" name="delete_switch" value="1"/>
                <td class = "review_delete">
                    <a class = "review_button" href="javascript:;" onclick="document.getElementById('delete_form').submit();">
                        delete
                    </a>
                </td>
                </form>
	     </tr>
	</table>
    </div>
    </div>
    % endfor
% endif

<script>
function score_click_good(e) {
    //alert(e);
    var good = document.getElementById(e).innerHTML;
    good = good.trim();
    var good_index = good.search("good.png");
    var good_id_before = good.slice(59);
    var good_id_int = Number(good_id_before);
    good_id_int += 1;
    var good_id_after = String(good_id_int);
    document.getElementById(e).innerHTML = "<img class='review_good_img' src='/static/images/good.png'>" + good_id_after;
}
function score_click_bad(e) {
    //alert(e);
    var bad = document.getElementById(e).innerHTML;
    bad = bad.trim();
    var bad_index = bad.search("bad.png");
    var bad_id_before = bad.slice(57);
    var bad_id_int = Number(bad_id_before);
    bad_id_int += 1;
    var bad_id_after = String(bad_id_int);
    document.getElementById(e).innerHTML = "<img class='review_bad_img' src='/static/images/bad.png'>" + bad_id_after;
}
</script>

<!-- HTML (view) -->
% if len(review_list) != 0:
<div class="scrollbar" id="style-1">
    % for row in review_list:
    <div class = "review_body_div">
	<table class = "review_body_table">
	    <tr class = "review_body_1">
		<td class ="review_id">${row[1]}</td>

                % if row[3] == 1:
		<td class ="review_star"><div class="star-ratings-css" title=".200"></div></td>
                % endif
                % if row[3] == 2:
		<td class ="review_star"><div class="star-ratings-css" title=".400"></div></td>
                % endif
                % if row[3] == 3:
		<td class ="review_star"><div class="star-ratings-css" title=".600"></div></td>
                % endif
                % if row[3] == 4:
		<td class ="review_star"><div class="star-ratings-css" title=".800"></div></td>
                % endif
                % if row[3] == 5:
		<td class ="review_star"><div class="star-ratings-css" title=".1000"></div></td>
                % endif

	    </tr>
	</table>
	<table>
	    <tr class = "review_body_2">
		<td class = "review_content">${row[2]}</td>
	    </tr>
	</table>
	<table>
	     <tr>
		<td class = "review_time">${row[4]}</td>

		<td class = "review_good">
                    <a class = "review_button" id="good${row[0]}" href="javascript:;" onclick="score_click_good($(this).attr('id'))">
                        <img class="review_good_img" src="/static/images/good.png"/>${row[5]}
                    </a>
                </td>

		<td class = "review_bad">
                    <a class = "review_button" id="bad${row[0]}" href="javascript:;" onclick="score_click_bad($(this).attr('id'))">
                        <img class="review_bad_img" src="/static/images/bad.png"/>${row[6]}
                    </a>
                </td>
	     </tr>
	</table>
    </div>
    % endfor
</div>
% endif

% if already_lock != 1:
<!-- HTML (write) -->
<form action="http://192.168.33.20:8000/courses/${course_id}/about" method="get">
    <div id="review_write_star">
	<fieldset class="rating">
	    <input type="radio" id="star5" name="review_rating" value="5" /><label class = "full" for="star5" id='noclose' title="Awesome - 5 stars"></label>
	    <input type="radio" id="star4" name="review_rating" value="4" /><label class = "full" for="star4" id='noclose' title="Pretty good - 4 stars"></label>
	    <input type="radio" id="star3" name="review_rating" value="3" /><label class = "full" for="star3" id='noclose' title="Meh - 3 stars"></label>
	    <input type="radio" id="star2" name="review_rating" value="2" /><label class = "full" for="star2" id='noclose' title="Kinda bad - 2 stars"></label>
	    <input type="radio" id="star1" name="review_rating" value="1" /><label class = "full" for="star1" id='noclose' title="Sucks big time - 1 star"></label>
	</fieldset>
    </div>
    <div class="form-group" id="noclose">
        <textarea class="form-control" id="review_write_area" rows="5" name="review_data"></textarea>
        <input id="test" type="hidden" name="write_switch" value="1">
        <button type="submit" id="review_write_submit">Write</button>
    </div>
</form>
% endif

